<!DOCTYPE html>
<html>
<head>
  <title>Sleep Graph 1 - Enhanced Sleep Analysis</title>
  <style>
    body {
      background-color: #F9F9F9;
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    .chart-container {
      width: 100%;
      height: 312px;
      max-width: 480px;
      background: white;
      padding: 20px 25px 45px 25px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    .metrics {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 15px;
      text-align: center;
    }

    .metric-value {
      font-size: 21px;
      font-weight: bold;
      color: #1E9AFC;
    }

    .metric-label {
      font-size: 14px;
      font-weight: 600;
      color: #555;
    }

    .chart-title {
      font-size: 18px;
      color: #333;
      margin-bottom: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="chart-container">
    <div class="metrics">
      <div>
        <div class="metric-value">+42%</div>
        <div class="metric-label">Improvement</div>
      </div>
      <div>
        <div class="metric-value">92%</div>
        <div class="metric-label">Current Quality</div>
      </div>
      <div>
        <div class="metric-value">185m</div>
        <div class="metric-label">Deep + REM</div>
      </div>
    </div>
    <canvas id="sleepChart"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const ctx = document.getElementById('sleepChart').getContext('2d');
    const gradient = ctx.createLinearGradient(0, 0, 0, 200);
    gradient.addColorStop(0, 'rgba(30, 154, 252, 0.2)');
    gradient.addColorStop(1, 'rgba(30, 154, 252, 0)');

    const deepRemGradient = ctx.createLinearGradient(0, 0, 0, 200);
    deepRemGradient.addColorStop(0, 'rgba(100, 58, 167, 0.2)');
    deepRemGradient.addColorStop(1, 'rgba(100, 58, 167, 0)');

    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8'],
        datasets: [{
          label: 'Sleep Quality',
          data: [50, 58, 54, 65, 72, 78, 85, 92],
          borderColor: '#1E9AFC',
          backgroundColor: gradient,
          fill: true,
          tension: 0.4,
          pointRadius: 4,
          yAxisID: 'y'
        },
        {
          label: 'Deep + REM Sleep',
          data: [90, 98, 115, 108, 145, 158, 172, 185],
          borderColor: '#643AA7',
          backgroundColor: deepRemGradient,
          fill: true,
          tension: 0.4,
          pointRadius: 4,
          yAxisID: 'y1'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        layout: {
          padding: {
            left: 10,
            right: 10,
            top: 0,
            bottom: 10
          }
        },
        interaction: {
          mode: 'index',
          intersect: false,
        },
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: (ctx) => {
                if (ctx.datasetIndex === 0) {
                  return `Quality: ${ctx.raw}%`;
                }
                return `Deep + REM: ${ctx.raw}min`;
              }
            }
          }
        },
        scales: {
          y: {
            type: 'linear',
            display: true,
            position: 'left',
            min: 0,
            max: 100,
            ticks: {
              callback: v => `${v}%`,
              font: { 
                size: 11,
                weight: 600
              },
              stepSize: 20,
              color: '#555',
              padding: 8
            },
            grid: { color: 'rgba(0,0,0,0.03)' }
          },
          y1: {
            type: 'linear',
            display: true,
            position: 'right',
            min: 0,
            max: 200,
            ticks: {
              callback: v => `${v}m`,
              font: { 
                size: 11,
                weight: 600
              },
              stepSize: 40,
              color: '#555',
              padding: 8
            },
            grid: { display: false }
          },
          x: {
            grid: { display: false },
            ticks: { 
              font: { 
                size: 11,
                weight: 600
              },
              color: '#555',
              padding: 8
            }
          }
        }
      }
    });
  </script>
</body>
</html>
